{% extends "cours_maths/base.html" %}
{% block title %}{{ chapitre.titre }}{% endblock %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-md-10">
    <div class="card shadow mb-4">
      <div class="card-header bg-primary text-white">
        <h2 class="mb-0">{{ chapitre.titre }}</h2>
      </div>
      <div class="card-body">

        <div class="mb-4">
          <h4>üìò Le√ßons</h4>
          <ul class="list-group">
            {% for lecon in lecons %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ lecon.nom }}</span>
                {% if lecon.fichier %}
                  <a href="{{ lecon.fichier.url }}" target="_blank" class="btn btn-outline-info btn-sm">üìÑ PDF</a>
                {% endif %}
              </li>
            {% empty %}
              <li class="list-group-item text-muted text-center">Aucune le√ßon disponible.</li>
            {% endfor %}
          </ul>
        </div>

        <div class="mb-4">
          <h4>üé¨ Vid√©os</h4>
          <ul class="list-group">
            {% for video in videos %}
              <li class="list-group-item">
                <div class="mb-2"><strong>{{ video.titre }}</strong></div>
                {% if video.url %}
                  {% if "youtube.com" in video.url or "youtu.be" in video.url %}
                    <div class="ratio ratio-16x9">
                      <iframe src="{{ video.url|add:'?rel=0' }}" frameborder="0" allowfullscreen></iframe>
                    </div>
                  {% else %}
                    <video controls width="100%">
                      <source src="{{ video.url }}" type="video/mp4">
                      Votre navigateur ne supporte pas la vid√©o.
                    </video>
                  {% endif %}
                {% endif %}
              </li>
            {% empty %}
              <li class="list-group-item text-muted text-center">Aucune vid√©o disponible.</li>
            {% endfor %}
          </ul>
        </div>

        <div class="mb-4">
          <h4>üìù Exercices</h4>
          <ul class="list-group">
            {% for exo in exercices %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ exo.titre }}</span>
                {% if exo.fichier %}
                  <a href="{{ exo.fichier.url }}" target="_blank" class="btn btn-outline-success btn-sm">üìÑ Voir</a>
                {% endif %}
              </li>
            {% empty %}
              <li class="list-group-item text-muted text-center">Aucun exercice disponible.</li>
            {% endfor %}
          </ul>
        </div>

        <div>
          <h4>üéØ Quiz</h4>
          <ul class="list-group">
            {% for q in quiz %}
              <li class="list-group-item">
                <a href="{% url 'quiz_detail' q.id %}" class="btn btn-outline-warning btn-sm">{{ q.titre }}</a>
              </li>
            {% empty %}
              <li class="list-group-item text-muted text-center">Aucun quiz disponible.</li>
            {% endfor %}
          </ul>
        </div>

      </div>
    </div>
  </div>
</div>
{% endblock %}